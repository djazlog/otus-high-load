# API Постов

## Описание

API для работы с постами пользователей. Позволяет создавать, читать, обновлять и удалять посты.

## Эндпоинты

### POST /post/create

Создает новый пост.

**Заголовки:**
- `Authorization: Bearer <token>` - токен аутентификации

**Тело запроса:**
```json
{
  "text": "Текст поста"
}
```

**Ответ:**
```json
{
  "id": "uuid-поста"
}
```

**Коды ответов:**
- `200` - успешно создан
- `400` - невалидные данные
- `401` - неавторизован
- `500` - внутренняя ошибка сервера

### GET /post/get/{id}

Получает пост по ID.

**Параметры:**
- `id` (path) - ID поста

**Ответ:**
```json
{
  "id": "uuid-поста",
  "text": "Текст поста",
  "author_user_id": "uuid-автора"
}
```

**Коды ответов:**
- `200` - успешно получен
- `400` - невалидные данные
- `404` - пост не найден
- `500` - внутренняя ошибка сервера

### PUT /post/update

Обновляет существующий пост.

**Заголовки:**
- `Authorization: Bearer <token>` - токен аутентификации

**Тело запроса:**
```json
{
  "id": "uuid-поста",
  "text": "Новый текст поста"
}
```

**Ответ:**
- `200` - успешно обновлен

**Коды ответов:**
- `200` - успешно обновлен
- `400` - невалидные данные
- `401` - неавторизован
- `403` - запрещено (не автор поста)
- `404` - пост не найден
- `500` - внутренняя ошибка сервера

### PUT /post/delete/{id}

Удаляет пост.

**Заголовки:**
- `Authorization: Bearer <token>` - токен аутентификации

**Параметры:**
- `id` (path) - ID поста

**Ответ:**
- `200` - успешно удален

**Коды ответов:**
- `200` - успешно удален
- `400` - невалидные данные
- `401` - неавторизован
- `403` - запрещено (не автор поста)
- `404` - пост не найден
- `500` - внутренняя ошибка сервера

### GET /post/feed

Получает ленту постов друзей.

**Заголовки:**
- `Authorization: Bearer <token>` - токен аутентификации

**Параметры запроса:**
- `offset` (query) - смещение для пагинации (по умолчанию 0)
- `limit` (query) - лимит постов (по умолчанию 10)

**Ответ:**
```json
[
  {
    "id": "uuid-поста",
    "text": "Текст поста",
    "author_user_id": "uuid-автора"
  }
]
```

**Коды ответов:**
- `200` - успешно получены посты
- `400` - невалидные данные
- `401` - неавторизован
- `500` - внутренняя ошибка сервера

## Модели данных

### Post
```go
type Post struct {
    ID           *string    // ID поста
    Text         *string    // Текст поста
    AuthorUserId *string    // ID автора поста
    CreatedAt    *time.Time // Время создания
    UpdatedAt    *time.Time // Время обновления
}
```

## Аутентификация

Все эндпоинты, кроме `GET /post/get/{id}`, требуют аутентификации через Bearer токен в заголовке `Authorization`.

## Авторизация

- Пользователи могут создавать посты от своего имени
- Пользователи могут обновлять и удалять только свои посты
- Пользователи могут читать все посты
- Лента постов содержит только посты друзей

## Обработка ошибок

При возникновении ошибок API возвращает соответствующий HTTP статус код и описание ошибки в теле ответа.

## Пагинация

Для эндпоинтов с пагинацией используются параметры:
- `offset` - смещение от начала списка
- `limit` - максимальное количество элементов

## Метрики

Все API вызовы включают:
- Счетчики запросов
- Счетчики ответов по статус кодам
- Гистограммы времени ответа
- Гистограммы ошибок
